<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>関西弁に変換して発声するWebアプリ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    #inputText, #kansaiText {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #333;
      border-radius: 5px;
      width: 100%;
      max-width: 600px;
    }
    #message {
      margin-top: 20px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h1>関西弁に変換して発声するアプリ</h1>
  <p>話しかけた言葉が表示され、関西弁に変換して発声します。</p>
  
  <div>
    <strong>入力された文章:</strong>
    <div id="inputText"></div>
  </div>
  <div>
    <strong>関西弁に変換された文章:</strong>
    <div id="kansaiText"></div>
  </div>
  
  <button onclick="startRecognition()">音声認識開始</button>
  <div id="message"></div>
  
  <script>
    // Web Speech APIの設定
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "ja-JP";
    recognition.interimResults = false;

    // 音声認識結果を取得し関西弁に変換
    recognition.onresult = (event) => {
      const input = event.results[0][0].transcript.trim();
      document.getElementById("inputText").innerText = input;
      
      // 関西弁に変換
      const kansaiText = convertToKansai(input);
      document.getElementById("kansaiText").innerText = kansaiText;

      // 関西弁のテキストを発声
      speakKansaiText(kansaiText);
    };

    recognition.onerror = (event) => {
      document.getElementById("message").innerText = "エラーが発生しました: " + event.error;
    };

    function startRecognition() {
      recognition.start();
      document.getElementById("message").innerText = "音声認識中...";
    }

    // 関西弁に変換する関数
    function convertToKansai(text) {
      return text
        .replace(/こんにちは/g, 'まいど')
        .replace(/ありがとうございます/g, 'おおきに')
        .replace(/ありがとう/g, 'おおきに')
        .replace(/ごめんなさい/g, 'すんまへん')
        .replace(/すみません/g, 'すんまへん')
        .replace(/ですか/g, 'やろか')
        .replace(/だよ/g, 'やで')
        .replace(/だね/g, 'やな')
        .replace(/だろう/g, 'やろ')
        .replace(/ですね/g, 'やな')
        .replace(/ですよ/g, 'やで')
        .replace(/します/g, 'しまっせ')
        .replace(/しています/g, 'してまんねん')
        .replace(/している/g, 'しとる')
        .replace(/していますか/g, 'してまっか')
        .replace(/してください/g, 'してくれへん')
        .replace(/です/g, 'やで')
        .replace(/ます/g, 'まっせ')
        .replace(/ました/g, 'まんねん')
        .replace(/ください/g, 'くれへん')
        .replace(/あります/g, 'おまっせ')
        .replace(/ない/g, 'あらへん')
        .replace(/本当/g, 'ホンマ')
        .replace(/本当に/g, 'ホンマに')
        .replace(/すごい/g, 'めっちゃ')
        .replace(/いい/g, 'ええ')
        .replace(/だ/g, 'や')
        .replace(/でしょう/g, 'やろ')
        .replace(/わかりました/g, 'わかったで')
        .replace(/そうですね/g, 'せやな')
        .replace(/そうです/g, 'せやで')
        .replace(/そうですよ/g, 'せやで')
        .replace(/分かりました/g, 'わかったわ')
        .replace(/聞いて/g, '聞いといて')
        .replace(/教えて/g, '教えといて')
        .replace(/疲れた/g, 'しんどいわ');
    }

    // 関西弁を発声する関数
    function speakKansaiText(text) {
      const synth = window.speechSynthesis;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "ja-JP";
      synth.speak(utterance);
    }
  </script>
</body>
</html>
